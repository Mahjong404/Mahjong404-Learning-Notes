## HTTP
知识来源：https://www.byhy.net/auto/apitest/01/#message-body

### 一、简述
* 全称：Hypertext Transfer Protocol (文本传输协议)
* HTTP有好几个版本，包括：0.9 、1.0 、1.1 、2 、3 ，当前最广泛使用的是 HTTP/1.1 版本。
* HTTP协议最大的特点是通讯双方分为**客户端**和**服务端**。
* HTTP3 以前版本（除了HTTP3）, 都是 基于**TCP协议**的，所以要进行通讯，**客户端**必须先和**服务端**创建**TCP连接**。
而且 HTTP 双方的信息交互，必须是这样一种方式：
 - 客户端 先发送**HTTP请求（request）** 给服务端
 - 服务端 收到请求后，会返回**HTTP响应（response）** 给客户端

### 二、HTTP请求消息
请求消息包含三部分：**request line(请求行)**,**request headers(请求头)**,**message body(消息体)**

#### 1.request line (请求行)
http请求的第一行的内容，包含了3部分信息：**请求的方法(method)**，**操作资源的地址(url)**，**要使用的http协议的版本号**，例如：
```
GET /mgr/login.html?username=name&password=123 HTTP/1.1
```
##### （1）常见的请求方法（前四个最常见）
* **GET：获取资源信息**
* **POST：添加资源信息**
* **PUT：更新资源信息**
* **DELETE：删除资源信息**
* HEAD：获取资源的元数据
* OPTIONS：获取服务器支持的请求方法
* TRACE：回显服务器收到的请求，主要用于调试
* CONNECT：建立到服务器的隧道连接
* PATCH：部分更新资源信息
##### （2）url
url表示要获取资源的具体路径，其中：特别要注意的是**url参数(url query String)**
url参数在url中的“**?**”后，例如上文的例子中，url参数为：
```
username=name&password=123
//url参数的格式为：key=value(键值对)
//多个参数之间用&连接
```
对于url参数的格式，有个术语叫**urlencoded格式**

#### 2.request headers (请求头)
（1）请求头是http请求行下面的内容，里面存放一些信息。比如，请求发送的服务端域名是什么，希望接收的响应消息使用什么语言，请求消息体的长度等等。
（2）通常请求头都有**好多个**，**一个请求头占据一行**
（3）单个请求头的格式是：**key : value**
（4）HTTP协议规定了一些标准的请求头，开发者也可以在HTTP消息中添加自己定义的请求头

#### 3.message body (消息体)
（1）请求的url、请求头中可以存放一些数据信息，但是有些数据信息，往往需要存放在消息体中。特别是POST、PUT等请求，添加、修改的数据信息通常都是存放在**请求消息体**中的。
（2）如果HTTP请求有消息体，协议规定需要**在消息头和消息体之间插入一个空行**，隔开它们。
（3）请求消息体中保存了要提交给服务端的数据信息。比如：客户端要上传一个文件给服务端，就可以通过HTTP请求发送文件数据给服务端。文件的数据就应该在请求的消息体中。
（4）WEB API请求消息体通常是某种格式的文本，常见的有
- json
- www-form-urlencoded
- xml（现在已经不常用了）
具体使用了什么格式，可以在**请求头**中通过**Content-Type**来确定。

### 三、HTTP响应消息
响应消息包含三部分：status line,response headers,message body
#### 1.status line (状态行)
状态行在第一行，包含3部分信息：**协议版本**，**状态码**，**状态描述**，例如：
```
HTTP/1.1 200 OK
```
##### （1）常见的状态码
* 2xx：请求成功，200最常见
* 3xx：重定向，301/302最常见，表示客户端的这个请求的url地址已经改变了，需要客户端重新发起一个请求到另外的一个url
* 400：Bad Request，请求参数错误
* 401：Unauthorized，未授权，客户端需要先认证才能发送请求
* 403：Forbidden，禁止访问
* 404：Not Found，请求的资源不存在
* 408：Request Timeout，请求超时
* 410：Gone，请求的资源已不存在
* 5xx：Server Error，服务器内部发生了未知错误，500最常见

#### 2.response headers (响应头)
响应头是响应状态行下面的的内容，里面存放一些信息。作用和格式与请求头类似，不再赘述。

#### 3.message body (消息体)
如果HTTP响应有消息体（即可能没有消息体），协议规定需要在消息头和消息体之间插入一个空行，隔开它们。其他内容也与请求消息体类似，不再赘述。
